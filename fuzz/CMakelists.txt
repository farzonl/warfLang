project(${CMAKE_PROJECT_NAME}_FUZZ_TEST)
cmake_minimum_required(VERSION 3.10)

set(CMAKE_C_COMPILER:FILEPATH /usr/local/opt/llvm/bin/clang)
set(CMAKE_CXX_COMPILER:FILEPATH /usr/local/opt/llvm/bin/clang++)

#/usr/local/opt/llvm/lib/clang/12.0.1/lib/darwin/libclang_rt.fuzzer_osx.a
#/usr/local/opt/llvm/lib/clang/12.0.1/lib/darwin/libclang_rt.asan_osx_dynamic.dylib

include_directories(${CMAKE_SOURCE_DIR}/src/lib)

add_executable(${PROJECT_NAME} fuzzTest.cpp)

#clang++ -g -fsanitize=address,fuzzer
target_compile_options(${PROJECT_NAME}
            PRIVATE $<$<C_COMPILER_ID:Clang>:-g -O1 -lc++abi -fsanitize=address,fuzzer>
            )

target_link_libraries(${PROJECT_NAME}
            PRIVATE $<$<C_COMPILER_ID:Clang>:-fsanitize=address,fuzzer>
            WarfCore
            )